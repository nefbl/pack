#!/usr/bin/env node

'use strict';

process.title = 'nefbl-server';

let nodejs = require('@hai2007/nodejs');

// 首先，获取配置文件
let config = require('./config')(process);

nodejs.server({

    // 端口号
    port: config.devServer.port,

    // 服务器根路径
    contentBase: config.devServer.contentBase,

    // 拦截处理
    handler: function (request, response) {

        let filepath = nodejs.fullPath("./" + request.url, config.devServer.contentBase);

        // 如果请求的文件和打包出口文件一致，地址改为打包入口地址即可
        if (filepath == config.output.file) filepath = config.entry.file;



    }

});
